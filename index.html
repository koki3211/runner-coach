<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#007AFF">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon.svg">
  <link rel="apple-touch-icon" href="icon.svg">
  <title>Runner Coach</title>
  <link rel="stylesheet" href="design-tokens/variables.css">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    html {
      font-family: var(--font-family-body);
      font-size: var(--font-size-body);
      color: var(--color-label-primary);
      background: var(--color-bg-grouped);
      -webkit-font-smoothing: antialiased;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
    }
    body {
      padding-top: var(--safe-area-top);
      padding-bottom: calc(var(--tab-bar-height) + var(--safe-area-bottom));
      min-height: 100dvh;
    }
    .screen { display: none; }
    .screen.active { display: block; }

    /* Nav Bar */
    .nav-bar {
      position: sticky; top: 0; z-index: 100;
      padding: var(--space-md) var(--space-base);
      background: var(--color-bg-primary);
      border-bottom: 0.5px solid var(--color-separator);
    }
    .nav-bar h1 {
      font-family: var(--font-family-display);
      font-size: var(--font-size-large-title);
      font-weight: var(--font-weight-bold);
      line-height: var(--line-height-tight);
    }
    .nav-bar .subtitle {
      font-size: var(--font-size-subhead);
      color: var(--color-label-secondary);
      margin-top: var(--space-2xs);
    }

    /* Section & Card */
    .section { padding: var(--space-lg) var(--space-base); }
    .section-header {
      font-size: var(--font-size-title3);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-md);
    }
    .card {
      background: var(--color-bg-primary);
      border-radius: var(--radius-lg);
      padding: var(--space-base);
      box-shadow: var(--shadow-card);
      margin-bottom: var(--space-md);
    }

    /* Today Hero */
    .today-hero {
      color: #fff; border-radius: var(--radius-xl);
      padding: var(--space-xl); margin: var(--space-base);
      position: relative; overflow: hidden;
    }
    .today-hero.type-interval { background: linear-gradient(135deg, #FF3B30, #C93400); }
    .today-hero.type-easy { background: linear-gradient(135deg, #34C759, #248A3D); }
    .today-hero.type-tempo { background: linear-gradient(135deg, #FF9500, #C93400); }
    .today-hero.type-long { background: linear-gradient(135deg, #007AFF, #5856D6); }
    .today-hero.type-rest { background: linear-gradient(135deg, #8E8E93, #636366); }
    .today-hero.type-cross { background: linear-gradient(135deg, #5AC8FA, #007AFF); }
    .today-hero.type-recovery { background: linear-gradient(135deg, #30D158, #248A3D); }
    .today-hero::after {
      content: ""; position: absolute; top: -30%; right: -20%;
      width: 200px; height: 200px; border-radius: 50%;
      background: rgba(255,255,255,0.08);
    }
    .today-hero .workout-type {
      font-size: var(--font-size-caption1); font-weight: var(--font-weight-semibold);
      text-transform: uppercase; letter-spacing: 1px; opacity: 0.85;
    }
    .today-hero .workout-name {
      font-family: var(--font-family-display);
      font-size: var(--font-size-title1); font-weight: var(--font-weight-bold);
      margin-top: var(--space-xs); line-height: var(--line-height-tight);
    }
    .today-hero .workout-detail {
      font-size: var(--font-size-subhead); opacity: 0.8; margin-top: var(--space-sm);
    }
    .today-hero .start-btn {
      display: inline-flex; align-items: center; gap: var(--space-sm);
      margin-top: var(--space-lg); padding: var(--space-md) var(--space-xl);
      background: rgba(255,255,255,0.22); backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.3); border-radius: var(--radius-full);
      color: #fff; font-family: var(--font-family-body);
      font-size: var(--font-size-headline); font-weight: var(--font-weight-semibold);
      cursor: pointer; transition: transform var(--duration-fast) var(--easing-spring);
    }
    .today-hero .start-btn:active { transform: scale(0.95); }
    .today-hero .start-btn.completed-btn {
      background: rgba(255,255,255,0.35); pointer-events: none;
    }

    /* Workout Steps */
    .workout-steps { list-style: none; }
    .workout-steps li {
      display: flex; align-items: center; gap: var(--space-md);
      padding: var(--space-md) 0; border-bottom: 0.5px solid var(--color-separator);
    }
    .workout-steps li:last-child { border-bottom: none; }
    .step-index {
      width: 28px; height: 28px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: var(--font-size-caption1); font-weight: var(--font-weight-semibold);
      color: #fff; flex-shrink: 0;
    }
    .step-info { flex: 1; }
    .step-info .step-label { font-size: var(--font-size-subhead); font-weight: var(--font-weight-medium); }
    .step-info .step-meta { font-size: var(--font-size-caption1); color: var(--color-label-secondary); margin-top: 2px; }
    .step-pace { font-family: var(--font-family-data); font-size: var(--font-size-subhead); color: var(--color-label-secondary); }

    /* Week Scroll */
    .week-scroll {
      display: flex; gap: var(--space-sm); overflow-x: auto;
      scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;
      padding: 0 var(--space-base) var(--space-sm); scrollbar-width: none;
    }
    .week-scroll::-webkit-scrollbar { display: none; }
    .day-card {
      flex: 0 0 72px; scroll-snap-align: start; text-align: center;
      padding: var(--space-md) var(--space-sm);
      background: var(--color-bg-primary); border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm); cursor: pointer;
      transition: transform var(--duration-fast) var(--easing-spring);
      position: relative;
    }
    .day-card:active { transform: scale(0.95); }
    .day-card.today { border: 2px solid var(--color-brand-primary); }
    .day-card.completed::after {
      content: ""; position: absolute; top: 6px; right: 6px;
      width: 8px; height: 8px; border-radius: 50%; background: var(--color-success);
    }
    .day-card .day-label {
      font-size: var(--font-size-caption2); color: var(--color-label-secondary);
      text-transform: uppercase; letter-spacing: 0.5px;
    }
    .day-card .day-date { font-size: var(--font-size-title3); font-weight: var(--font-weight-semibold); margin: var(--space-xs) 0; }
    .day-card .day-type {
      font-size: 9px; font-weight: var(--font-weight-semibold);
      text-transform: uppercase; letter-spacing: 0.5px;
      padding: 2px 6px; border-radius: var(--radius-full);
      color: #fff; display: inline-block;
    }

    /* Progress Ring */
    .progress-section { display: flex; align-items: center; gap: var(--space-lg); padding: var(--space-base); }
    .progress-ring-wrap { position: relative; width: 80px; height: 80px; flex-shrink: 0; }
    .progress-ring { transform: rotate(-90deg); }
    .progress-ring-bg { fill: none; stroke: var(--color-fill-tertiary); stroke-width: 6; }
    .progress-ring-fill {
      fill: none; stroke: var(--color-brand-primary); stroke-width: 6;
      stroke-linecap: round; transition: stroke-dashoffset var(--duration-slow) var(--easing-default);
    }
    .progress-ring-text {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
      font-family: var(--font-family-data); font-size: var(--font-size-title3); font-weight: var(--font-weight-bold);
    }
    .progress-info .progress-label { font-size: var(--font-size-headline); font-weight: var(--font-weight-semibold); }
    .progress-info .progress-detail { font-size: var(--font-size-footnote); color: var(--color-label-secondary); margin-top: var(--space-2xs); }

    /* Bar Chart */
    .bar-chart { display: flex; align-items: flex-end; gap: var(--space-sm); height: 100px; padding: var(--space-base) 0; }
    .bar-col { flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--space-xs); }
    .bar { width: 100%; max-width: 32px; border-radius: var(--radius-sm) var(--radius-sm) 0 0; transition: height var(--duration-normal) var(--easing-spring); }
    .bar-label { font-size: var(--font-size-caption2); color: var(--color-label-secondary); }
    .bar-value { font-family: var(--font-family-data); font-size: var(--font-size-caption2); color: var(--color-label-secondary); }

    /* Pace Grid */
    .pace-grid {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-md);
    }
    .pace-item { text-align: center; }
    .pace-item .pace-label {
      font-size: var(--font-size-caption2); color: var(--color-label-secondary);
      text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: var(--space-2xs);
    }
    .pace-item .pace-value {
      font-family: var(--font-family-data); font-size: var(--font-size-headline);
      font-weight: var(--font-weight-semibold); color: var(--color-brand-primary);
    }

    /* Monthly Chart */
    .monthly-chart {
      display: flex; align-items: flex-end; gap: var(--space-md);
      height: 160px; padding: var(--space-base) 0;
    }
    .monthly-col { flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--space-xs); }
    .monthly-values { text-align: center; line-height: 1.2; }
    .monthly-val-done {
      font-family: var(--font-family-data); font-size: var(--font-size-caption1);
      font-weight: var(--font-weight-bold); color: var(--color-brand-primary);
    }
    .monthly-val-plan {
      font-family: var(--font-family-data); font-size: var(--font-size-caption2);
      color: var(--color-label-tertiary);
    }
    .monthly-bar-wrap {
      width: 100%; max-width: 40px; position: relative;
      border-radius: var(--radius-sm) var(--radius-sm) 0 0; overflow: hidden;
    }
    .monthly-bar-planned {
      position: absolute; bottom: 0; left: 0; right: 0;
      background: var(--color-fill-tertiary); border-radius: var(--radius-sm) var(--radius-sm) 0 0;
    }
    .monthly-bar-done {
      position: absolute; bottom: 0; left: 0; right: 0;
      background: var(--color-brand-primary); border-radius: var(--radius-sm) var(--radius-sm) 0 0;
      transition: height var(--duration-normal) var(--easing-spring);
    }
    .monthly-label { font-size: var(--font-size-caption2); color: var(--color-label-secondary); }
    .monthly-legend {
      display: flex; justify-content: center; gap: var(--space-lg);
      margin-top: var(--space-sm); font-size: var(--font-size-caption1); color: var(--color-label-secondary);
    }
    .legend-item { display: flex; align-items: center; gap: var(--space-xs); }
    .legend-dot {
      width: 10px; height: 10px; border-radius: 2px;
    }
    .legend-dot.done { background: var(--color-brand-primary); }
    .legend-dot.planned { background: var(--color-fill-tertiary); }

    /* Plan Screen */
    .plan-week { margin-bottom: var(--space-lg); }
    .plan-week-header {
      font-size: var(--font-size-footnote); font-weight: var(--font-weight-semibold);
      color: var(--color-label-secondary); text-transform: uppercase;
      letter-spacing: 0.5px; padding: 0 var(--space-base) var(--space-sm);
    }
    .plan-list { list-style: none; }
    .plan-item {
      display: flex; align-items: center; gap: var(--space-md);
      padding: var(--space-md) var(--space-base);
      background: var(--color-bg-primary);
      border-bottom: 0.5px solid var(--color-separator);
      cursor: pointer; transition: background var(--duration-fast);
    }
    .plan-item:first-child { border-radius: var(--radius-md) var(--radius-md) 0 0; }
    .plan-item:last-child { border-radius: 0 0 var(--radius-md) var(--radius-md); border-bottom: none; }
    .plan-item:active { background: var(--color-fill-tertiary); }
    .plan-item .plan-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
    .plan-item .plan-day { width: 32px; font-size: var(--font-size-footnote); color: var(--color-label-secondary); flex-shrink: 0; }
    .plan-item .plan-name { flex: 1; font-size: var(--font-size-subhead); font-weight: var(--font-weight-medium); }
    .plan-item .plan-dist { font-family: var(--font-family-data); font-size: var(--font-size-footnote); color: var(--color-label-secondary); }
    .plan-item .plan-check {
      width: 22px; height: 22px; border-radius: 50%;
      border: 2px solid var(--color-fill-primary);
      display: flex; align-items: center; justify-content: center;
      flex-shrink: 0; transition: all var(--duration-fast) var(--easing-spring); cursor: pointer;
    }
    .plan-item .plan-check.done { border-color: var(--color-success); background: var(--color-success); }
    .plan-item .plan-check.done::after { content: "\2713"; color: #fff; font-size: 12px; font-weight: var(--font-weight-bold); }

    /* Friends */
    .friend-card {
      display: flex; align-items: center; gap: var(--space-md);
      padding: var(--space-base); background: var(--color-bg-primary);
      border-radius: var(--radius-lg); box-shadow: var(--shadow-card);
      margin: 0 var(--space-base) var(--space-md);
    }
    .friend-avatar {
      width: 48px; height: 48px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 22px; flex-shrink: 0; color: #fff; font-weight: var(--font-weight-bold);
    }
    .friend-info { flex: 1; min-width: 0; }
    .friend-name { font-size: var(--font-size-headline); font-weight: var(--font-weight-semibold); }
    .friend-goal { font-size: var(--font-size-caption1); color: var(--color-label-secondary); margin-top: 2px; }
    .friend-today { font-size: var(--font-size-footnote); color: var(--color-label-secondary); margin-top: var(--space-xs); display: flex; align-items: center; gap: var(--space-xs); }
    .friend-today .done-badge {
      font-size: var(--font-size-caption2); font-weight: var(--font-weight-semibold);
      color: var(--color-success); background: rgba(52,199,89,0.12);
      padding: 2px 8px; border-radius: var(--radius-full);
    }
    .friend-streak { text-align: center; flex-shrink: 0; }
    .friend-streak .streak-num { font-family: var(--font-family-data); font-size: var(--font-size-title2); font-weight: var(--font-weight-bold); color: var(--color-brand-accent); }
    .friend-streak .streak-label { font-size: var(--font-size-caption2); color: var(--color-label-secondary); }
    .friend-week { display: flex; gap: 3px; margin-top: var(--space-sm); }
    .friend-week-dot { width: 8px; height: 8px; border-radius: 2px; background: var(--color-fill-tertiary); }
    .friend-week-dot.done { background: var(--color-success); }

    /* Goal Screen — Custom Form */
    .form-group { margin: 0 var(--space-base) var(--space-lg); }
    .form-label {
      display: block; font-size: var(--font-size-subhead); font-weight: var(--font-weight-semibold);
      color: var(--color-label-secondary); margin-bottom: var(--space-sm);
    }
    .form-input {
      width: 100%; padding: var(--space-md); font-size: var(--font-size-body);
      font-family: var(--font-family-body); color: var(--color-label-primary);
      background: var(--color-bg-primary); border: 1.5px solid var(--color-separator-opaque);
      border-radius: var(--radius-md); outline: none;
      transition: border-color var(--duration-fast);
    }
    .form-input:focus { border-color: var(--color-brand-primary); }
    .form-input::placeholder { color: var(--color-label-tertiary); }
    .form-toggle-group { display: flex; gap: var(--space-sm); }
    .form-toggle {
      flex: 1; padding: var(--space-md); text-align: center;
      font-size: var(--font-size-subhead); font-weight: var(--font-weight-semibold);
      font-family: var(--font-family-body);
      background: var(--color-bg-primary); border: 1.5px solid var(--color-separator-opaque);
      border-radius: var(--radius-md); cursor: pointer;
      color: var(--color-label-secondary);
      transition: all var(--duration-fast);
    }
    .form-toggle.active {
      border-color: var(--color-brand-primary); background: rgba(0,122,255,0.08);
      color: var(--color-brand-primary);
    }
    .form-hint {
      font-size: var(--font-size-caption1); color: var(--color-brand-primary);
      margin-top: var(--space-sm); min-height: 1.6em; line-height: 1.4;
    }

    .cta-btn {
      display: block; width: calc(100% - var(--space-base) * 2);
      margin: var(--space-lg) auto; padding: var(--space-base);
      background: var(--color-brand-primary); color: #fff; border: none;
      border-radius: var(--radius-md); font-family: var(--font-family-body);
      font-size: var(--font-size-headline); font-weight: var(--font-weight-semibold);
      cursor: pointer; transition: transform var(--duration-fast) var(--easing-spring);
    }
    .cta-btn:active { transform: scale(0.97); }
    .cta-btn:disabled { opacity: 0.4; cursor: default; }

    /* Auth UI */
    .auth-area { padding: var(--space-base); }
    .auth-logged-in {
      display: flex; align-items: center; gap: var(--space-md);
      padding: var(--space-base); background: var(--color-bg-primary);
      border-radius: var(--radius-lg); box-shadow: var(--shadow-card);
    }
    .auth-avatar { width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0; }
    .auth-avatar-placeholder {
      width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0;
      background: var(--color-brand-primary); color: #fff;
      display: flex; align-items: center; justify-content: center;
      font-size: var(--font-size-headline); font-weight: var(--font-weight-bold);
    }
    .auth-info { flex: 1; }
    .auth-name { font-size: var(--font-size-subhead); font-weight: var(--font-weight-semibold); }
    .auth-link {
      font-size: var(--font-size-caption1); color: var(--color-brand-primary);
      background: none; border: none; cursor: pointer; font-family: var(--font-family-body);
      padding: 0; margin-top: 2px;
    }
    .auth-offline {
      font-size: var(--font-size-footnote); color: var(--color-label-tertiary);
      text-align: center; padding: var(--space-md);
    }
    .login-btn {
      display: inline-flex; align-items: center; gap: var(--space-sm);
      padding: var(--space-md) var(--space-xl);
      background: var(--color-bg-primary); border: 1.5px solid var(--color-separator-opaque);
      border-radius: var(--radius-full); cursor: pointer;
      font-family: var(--font-family-body); font-size: var(--font-size-subhead);
      font-weight: var(--font-weight-semibold); color: var(--color-label-primary);
      transition: all var(--duration-fast);
    }
    .login-btn:active { transform: scale(0.97); background: var(--color-fill-tertiary); }

    /* Completion Overlay */
    .completion-overlay {
      position: fixed; inset: 0; z-index: 1000; display: none;
      flex-direction: column; align-items: center; justify-content: center;
      background: var(--color-bg-primary); text-align: center; padding: var(--space-2xl);
    }
    .completion-overlay.show { display: flex; animation: fadeIn var(--duration-normal) var(--easing-default); }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .completion-icon {
      width: 120px; height: 120px; border-radius: 50%;
      background: linear-gradient(135deg, var(--color-success), #2fb851);
      display: flex; align-items: center; justify-content: center;
      font-size: 56px; color: #fff; margin-bottom: var(--space-xl);
      animation: popIn 0.5s var(--easing-spring) 0.2s both;
    }
    @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    .completion-title {
      font-family: var(--font-family-display); font-size: var(--font-size-title1);
      font-weight: var(--font-weight-bold); animation: slideUp var(--duration-normal) var(--easing-default) 0.4s both;
    }
    .completion-subtitle {
      font-size: var(--font-size-callout); color: var(--color-label-secondary);
      margin-top: var(--space-sm); animation: slideUp var(--duration-normal) var(--easing-default) 0.5s both;
    }
    @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    .completion-stats {
      display: flex; gap: var(--space-2xl); margin-top: var(--space-2xl);
      animation: slideUp var(--duration-normal) var(--easing-default) 0.6s both;
    }
    .completion-stat { text-align: center; }
    .completion-stat .stat-value { font-family: var(--font-family-data); font-size: var(--font-size-title1); font-weight: var(--font-weight-bold); color: var(--color-brand-primary); }
    .completion-stat .stat-label { font-size: var(--font-size-caption1); color: var(--color-label-secondary); margin-top: var(--space-2xs); }
    .confetti-container { position: fixed; inset: 0; pointer-events: none; z-index: 1001; overflow: hidden; }
    .confetti {
      position: absolute; width: 8px; height: 8px; border-radius: 2px;
      top: -10px; animation: confettiFall linear forwards;
    }
    @keyframes confettiFall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(110vh) rotate(720deg); opacity: 0; } }
    .completion-close-btn {
      margin-top: var(--space-3xl); padding: var(--space-md) var(--space-3xl);
      background: var(--color-brand-primary); color: #fff; border: none;
      border-radius: var(--radius-full); font-family: var(--font-family-body);
      font-size: var(--font-size-headline); font-weight: var(--font-weight-semibold);
      cursor: pointer; transition: transform var(--duration-fast) var(--easing-spring);
      animation: slideUp var(--duration-normal) var(--easing-default) 0.7s both;
    }
    .completion-close-btn:active { transform: scale(0.95); }

    /* Tab Bar */
    .tab-bar {
      position: fixed; bottom: 0; left: 0; right: 0; z-index: 200;
      display: flex; justify-content: space-around; align-items: flex-start;
      padding: var(--space-sm) 0 calc(var(--space-sm) + var(--safe-area-bottom));
      background: var(--color-bg-elevated);
      border-top: 0.5px solid var(--color-separator);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
    }
    .tab-item {
      display: flex; flex-direction: column; align-items: center; gap: 2px;
      padding: var(--space-xs) var(--space-md); border: none; background: none;
      cursor: pointer; color: var(--color-label-tertiary);
      font-family: var(--font-family-body); font-size: var(--font-size-caption2);
      font-weight: var(--font-weight-medium); transition: color var(--duration-fast);
    }
    .tab-item.active { color: var(--color-brand-primary); }
    .tab-item svg { width: 24px; height: 24px; fill: currentColor; }

    /* Empty state */
    .empty-state {
      text-align: center; padding: var(--space-4xl) var(--space-2xl);
      color: var(--color-label-secondary);
    }
    .empty-state .empty-icon { font-size: 48px; margin-bottom: var(--space-base); }
    .empty-state .empty-text { font-size: var(--font-size-callout); }
    .empty-state .empty-btn {
      margin-top: var(--space-lg); padding: var(--space-md) var(--space-xl);
      background: var(--color-brand-primary); color: #fff; border: none;
      border-radius: var(--radius-full); font-size: var(--font-size-subhead);
      font-weight: var(--font-weight-semibold); font-family: var(--font-family-body);
      cursor: pointer;
    }

    /* Utility */
    .mx { margin-left: var(--space-base); margin-right: var(--space-base); }
    .text-secondary { color: var(--color-label-secondary); }
    .text-sm { font-size: var(--font-size-footnote); }
    .mt-sm { margin-top: var(--space-sm); }
    .mt-md { margin-top: var(--space-md); }
    .mt-lg { margin-top: var(--space-lg); }
  </style>
</head>
<body>

<!-- SCREEN: TODAY -->
<div id="screen-today" class="screen active">
  <div class="nav-bar">
    <h1>Today</h1>
    <div class="subtitle" id="today-subtitle">プランを作成してください</div>
  </div>
  <div id="today-content"></div>
</div>

<!-- SCREEN: PLAN -->
<div id="screen-plan" class="screen">
  <div class="nav-bar">
    <h1>プラン</h1>
    <div class="subtitle" id="plan-subtitle"></div>
  </div>
  <div id="plan-content"></div>
  <div id="monthly-content"></div>
</div>

<!-- SCREEN: FRIENDS -->
<div id="screen-friends" class="screen">
  <div class="nav-bar">
    <h1>仲間</h1>
    <div class="subtitle">ランニング仲間とシェア</div>
  </div>
  <div id="auth-area" class="auth-area"></div>
  <div id="friends-content"></div>
</div>

<!-- SCREEN: GOAL -->
<div id="screen-goal" class="screen">
  <div class="nav-bar">
    <h1>目標設定</h1>
    <div class="subtitle">大会と目標タイムを入力</div>
  </div>
  <div class="section">
    <div class="section-header">あなたの目標</div>
    <div id="goal-form-area"></div>
  </div>
  <button class="cta-btn" id="generate-btn" onclick="App.generatePlan()">プランを自動作成</button>
  <div class="text-sm text-secondary" style="text-align:center;padding-bottom:var(--space-lg)">目標タイムからペースを自動算出します</div>
</div>

<!-- COMPLETION OVERLAY -->
<div id="completion-overlay" class="completion-overlay">
  <div class="confetti-container" id="confetti-container"></div>
  <div class="completion-icon">&#x2714;</div>
  <div class="completion-title">ナイスラン!</div>
  <div class="completion-subtitle" id="completion-subtitle"></div>
  <div class="completion-stats" id="completion-stats"></div>
  <button class="completion-close-btn" onclick="App.hideCompletion()">閉じる</button>
</div>

<!-- TAB BAR -->
<nav class="tab-bar">
  <button class="tab-item active" data-tab="today" onclick="App.switchTab('today',this)">
    <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
    今日
  </button>
  <button class="tab-item" data-tab="plan" onclick="App.switchTab('plan',this)">
    <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg>
    プラン
  </button>
  <button class="tab-item" data-tab="friends" onclick="App.switchTab('friends',this)">
    <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
    仲間
  </button>
  <button class="tab-item" data-tab="goal" onclick="App.switchTab('goal',this)">
    <svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
    設定
  </button>
</nav>

<!-- Firebase SDK (loaded only if config is set) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="firebase-config.js"></script>
<script src="social.js"></script>
<script src="app.js"></script>
</body>
</html>
